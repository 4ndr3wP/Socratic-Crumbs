/* Global styles and body reset */
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
  background-color: #f5f5f5;
}
/* App container */
.App {
  display: flex;
  flex-direction: column;
  height: 100vh;
}
/* Header bar with model selector */
.header {
  padding: 10px;
  background-color: #333;
  color: #fff;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.header h2 {
  margin: 0;
  font-size: 1.1rem;
}
.model-selector label {
  margin-right: 5px;
  font-size: 0.9rem;
}
.model-selector select {
  padding: 3px 5px;
}
/* Chat messages container */
.chat-container {
  flex: 1;
  padding: 10px; /* Keeps original top/left/right padding */
  overflow-y: auto;
  background-color: #efefef;
  padding-bottom: 70px; /* Increased from 50px to provide more clearance */
}
/* Message bubbles */
.message {
  display: flex;
  margin: 5px 0; 
}
.message.user {
  justify-content: flex-end;   
}
.message.assistant {
  justify-content: flex-start; 
}
/* Bubble styling (for the main response) */
.bubble {
  display: inline-block;
  padding: 8px 12px;
  border-radius: 16px;
  max-width: 70%;
  line-height: 1.45; 
  word-wrap: break-word;
  white-space: pre-wrap; 
  overflow-wrap: break-word; 
}

/* --- Main Bubble Content Spacing (for response text) --- */
.bubble > div > p, 
.bubble > p { 
  margin-top: 0; 
  margin-bottom: 0.5em; /* Adjusted for slightly less space after paragraphs */
}

.bubble > div > p:last-child,
.bubble > p:last-child {
  margin-bottom: 0; 
}

.bubble > div > h1, .bubble > div > h2, .bubble > div > h3, .bubble > div > h4, .bubble > div > h5, .bubble > div > h6,
.bubble > h1, .bubble > h2, .bubble > h3, .bubble > h4, .bubble > h5, .bubble > h6 {
  margin-top: 0.6em;    
  margin-bottom: 0.2em; 
  line-height: 1.2; 
}

/* FINAL ADJUSTED LIST SPACING */
.bubble > div > ul, .bubble > div > ol,
.bubble > ul, .bubble > ol {
  margin-top: 0.1em;    /* Minimal space before the list starts */
  margin-bottom: 0.1em; /* Minimal space after the list ends */
  padding-left: 20px; /* Standard indent for lists */
}

.bubble > div > li,
.bubble > li {
  margin-bottom: 0; /* No extra margin between list items themselves */
  padding-top: 0.05em; 
  padding-bottom: 0.05em; 
}

/* If paragraphs are inside list items, make their margins very small or zero */
.bubble > div > li p,
.bubble > li p {
  margin-top: 0; 
  margin-bottom: 0; /* Paragraphs inside list items should not add extra vertical space */
}

/* AGGRESSIVE LIST SPACING FIX */
/* Target the direct lists and their items with high specificity */
.bubble ul,
.bubble ol,
.bubble > div > ul,
.bubble > div > ol {
  margin-top: 0.2em !important;    /* Small gap before list */
  margin-bottom: 0.2em !important; /* Small gap after list */
  padding-top: 0 !important;
  padding-bottom: 0 !important;
  padding-left: 25px !important; /* Indentation for list */
  white-space: normal !important; /* Override pre-wrap for lists */
}

/* Target list items directly */
.bubble li,
.bubble > div > ul > li,
.bubble > div > ol > li,
.bubble > ul > li,
.bubble > ol > li {
  margin-top: 0 !important;
  margin-bottom: 0.1em !important; /* Minimal space between items */
  padding-top: 0 !important;
  padding-bottom: 0 !important;
  line-height: 1.4 !important; /* Adjust line-height for readability */
  white-space: normal !important; /* Override pre-wrap for list items */
}

/* CRITICAL: Remove margins from paragraphs directly inside list items */
.bubble li > p,
.bubble > div > ul > li > p,
.bubble > div > ol > li > p,
.bubble > ul > li > p,
.bubble > ol > li > p {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
  padding-top: 0 !important;
  padding-bottom: 0 !important;
  display: inline !important; /* Attempt to make paragraphs flow like text within li */
}

/* If paragraphs are the only child, ensure no margin and normal white-space */
.bubble li > p:only-child,
.bubble > div > ul > li > p:only-child,
.bubble > div > ol > li > p:only-child,
.bubble > ul > li > p:only-child,
.bubble > ol > li > p:only-child {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
  display: inline !important; /* Reinforce inline display */
}

/* Code block styling inside bubbles (NOT SyntaxHighlighter blocks) */
.bubble pre { 
  background-color: #f0f0f0; 
  color: #333;
  padding: 8px;
  border-radius: 4px;
  overflow-x: auto; 
  white-space: pre-wrap; 
  font-family: monospace; 
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}
.bubble code { 
  background-color: #f0f0f0; 
  padding: 2px 4px;
  border-radius: 4px;
  font-family: monospace;
}


/* User message bubble */
.user .bubble {
  background-color: #007AFF; 
  color: #fff;
}
/* Assistant message bubble */
.assistant .bubble {
  background-color: #E5E5EA; 
  color: #000;
}

/* Typing indicator */
.typing-indicator { 
  display: inline-block; 
  padding: 8px 0; 
}
.typing-indicator .dot {
  width: 8px;
  height: 8px;
  margin: 0 3px;
  background-color: #555;
  border-radius: 50%;
  display: inline-block;
  animation: bounce 1s infinite alternate;
}
.typing-indicator .dot:nth-child(1) { animation-delay: 0s; }
.typing-indicator .dot:nth-child(2) { animation-delay: 0.2s; }
.typing-indicator .dot:nth-child(3) { animation-delay: 0.4s; }
@keyframes bounce {
  0%   { transform: translateY(0); }
  50%  { transform: translateY(-5px); }
  100% { transform: translateY(0); }
}
/* Input area */
.input-area {
  display: flex;
  padding: 10px;
  background: #fff;
  border-top: 1px solid #ccc;
  align-items: center;
  position: fixed; /* Changed from sticky */
  bottom: 0;
  left: 0;
  right: 0; /* Make it span full width */
  z-index: 100;
  box-sizing: border-box; /* Ensures padding is within the 100% width */
}

.input-area textarea {
  flex: 1;
  padding: 6px 8px; 
  font-size: 14px;   
  line-height: 1.5;  /* Increased from 1.1 for better readability */
  border: 1px solid #ccc;
  border-radius: 18px; 
  resize: none;
  box-sizing: border-box;

  /* Recalculated height for one line: (1.5em) + 14px (padding + border) */
  height: calc(1.5em + 14px); 
  
  /* Max-height for 5 lines: (1.5em * 5) + 14px */
  max-height: calc((1.5em * 5) + 14px);
  
  overflow-y: hidden; 
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
}

.input-area button {
  padding: 6px 12px; 
  font-size: 14px;   
  margin-left: 8px; 
  border-radius: 18px; 
  line-height: 1.5;  /* Adjusted to match textarea's new line-height */
  height: calc(1.5em + 14px); /* Match textarea new single-line height */
  box-sizing: border-box; 
}

.think-toggle-button {
  background-color: transparent; 
  border: none;
  border-radius: 4px;
  padding: 2px 6px; 
  font-size: 1.6em;  
  margin-bottom: 6px; 
  cursor: pointer;
  display: inline-block; 
  line-height: 1; 
  vertical-align: middle; 
}

.think-toggle-button:hover {
  background-color: #f0f0f0; 
}

.thinking-bubble {
  background-color: #ffffff; 
  border: 1px solid #e0e0e0;   
  border-radius: 8px;         
  padding: 10px 15px;         
  margin-top: 6px;          
  margin-bottom: 12px;      
  font-size: 0.9em;
  color: #424242; 
  font-style: italic; 
  line-height: 1.45;   
  box-shadow: 0 1px 3px rgba(0,0,0,0.05); 
}

.thinking-bubble p {
  margin-top: 0.2em;
  margin-bottom: 0.4em; 
}
.thinking-bubble p:last-child {
  margin-bottom: 0.1em; 
}

.thinking-bubble h1,
.thinking-bubble h2,
.thinking-bubble h3 {
  font-size: 1.05em; 
  color: #333333; 
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}


.scroll-to-bottom {
  position: fixed;
  bottom: 80px; 
  left: 50%;
  transform: translateX(-50%); 
  background: rgba(0, 0, 0, 0.5);
  color: white;
  border: none;
  border-radius: 50%; 
  width: 50px; 
  height: 50px; 
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  opacity: 0.7;
  transition: opacity 0.3s ease;
  z-index: 1000; 
}

.scroll-to-bottom:hover {
  opacity: 1;
}
